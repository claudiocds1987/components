<form [formGroup]="filterForm" class="form">
    <h3 class="title">FILTRO</h3>
    <div class="form-fields">
        <ng-container *ngFor="let filter of config">
            <!-- Campo de texto -->
            <mat-form-field
                class="width"
                appearance="outline"
                *ngIf="filter.fieldType === 'text'"
                [appSkeleton]="isLoading"
            >
                <mat-label>{{ filter.label }}</mat-label>
                <input matInput [formControlName]="filter.fieldName" />
            </mat-form-field>

            <!-- Campo de selecciÃ³n -->
            <mat-form-field
                class="width"
                appearance="outline"
                *ngIf="filter.fieldType === 'select'"
                [appSkeleton]="isLoading"
            >
                <mat-label>{{ filter.label }}</mat-label>
                <mat-select [formControlName]="filter.fieldName">
                    <mat-option
                        *ngFor="let item of filter.selectItems"
                        [value]="item.id"
                    >
                        {{ item.description }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <ng-container *ngIf="filter.fieldType === 'date'">
                <app-date-input
                    [formControlName]="filter.fieldName"
                    [label]="filter.label"
                    [placeholder]="filter.label"
                    [isDisabled]="false"
                    [appSkeleton]="isLoading"
                ></app-date-input>
            </ng-container>

            <ng-container *ngIf="filter.fieldType === 'dateRange'">
                <div [formGroupName]="filter.fieldName">
                    <mat-form-field
                        appearance="outline"
                        class="width"
                        [appSkeleton]="isLoading"
                    >
                        <mat-label>{{ filter.label }}</mat-label>
                        <mat-date-range-input [rangePicker]="picker">
                            <input
                                matStartDate
                                [formControlName]="'startDate'"
                                placeholder="Desde"
                            />
                            <input
                                matEndDate
                                [formControlName]="'endDate'"
                                placeholder="Hasta"
                            />
                        </mat-date-range-input>
                        <mat-datepicker-toggle
                            matSuffix
                            [for]="picker"
                        ></mat-datepicker-toggle>
                        <mat-date-range-picker #picker></mat-date-range-picker>
                    </mat-form-field>
                </div>
            </ng-container>
        </ng-container>
    </div>

    <div class="filter-actions">
        <button
            mat-raised-button
            color="primary"
            (click)="applyFilter()"
            [disabled]="isButtonDisabled()"
        >
            Aplicar Filtro
        </button>
        <button
            mat-button
            color="primary"
            (click)="clearFilter()"
            [disabled]="!this.filterForm.dirty"
        >
            Limpiar Filtro
        </button>
    </div>
</form>
