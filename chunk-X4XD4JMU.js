import{a as Te}from"./chunk-SFWTOUAD.js";import{a as He,b as qe,c as ze}from"./chunk-64ZK5W7Q.js";import{f as Ie,g as ke,h as Pe,i as De}from"./chunk-EVZ5MDWV.js";import{a as ce}from"./chunk-GDMQ7NQL.js";import{a as Ve,b as Ne,c as Le,d as $e,e as Be,f as je}from"./chunk-VXZZXDIS.js";import"./chunk-5YESZIAT.js";import{B as Oe,C as Me,D as Ee,b as pe,d as E,g as ue,h as fe,i as ge,l as _e,n as he,o as ye,p as Ce,q as ve,r as xe,s as be,t as Fe,u as Se,y as Ae,z as we}from"./chunk-BMLLSFUZ.js";import{aa as ae,b as oe,ha as le,na as se,oa as de,pa as me,qa as Re}from"./chunk-FRIGIZR4.js";import{Aa as D,Ab as $,Bb as l,Ca as X,Cb as s,D as J,Db as v,Dc as ne,F as Q,Hb as B,Jc as q,Kb as x,Mb as g,Vb as f,Wb as R,Xa as a,Xb as j,_ as ee,a as F,ac as H,b as O,bc as re,c as Y,d as Z,e as N,ea as C,hb as S,ja as T,ka as I,nb as A,p as U,pb as c,ra as te,sa as k,ta as P,vb as ie,wb as y,y as K,zb as L}from"./chunk-Y3ZRIA3V.js";var u=function(r){return r.required="required",r.minLength="minLength",r.maxLength="maxLength",r.email="email",r.validateRange="validateRange",r}(u||{});function Ze(r,m,e){let i=!1,t=new Map;return r.controls.forEach(n=>{let o=n.get(m),d=o?.value;if(o?.hasError(e)){let _=o.errors||{},{[e]:p}=_,h=Z(_,[Y(e)]);o.setErrors(Object.keys(h).length>0?h:null)}if(d){let p=typeof d=="string"?d.toLowerCase():d;t.has(p)||t.set(p,[]),t.get(p).push(o)}}),t.forEach(n=>{n.length>1&&(i=!0,n.forEach(o=>{o.setErrors(O(F({},o.errors),{[e]:!0}))}))}),i}function z(r){return m=>{let e=m,i=!1;return r.forEach(t=>{if(t.isRepeated===!1){let n,o=!0;switch(t.fieldType){case"date":n="duplicatedDate";break;case"text":n="isDuplicated";break;case"email":n="duplicatedEmail";break;default:n="isDuplicated",o=!0;break}o&&Ze(e,t.fieldName,n)&&(i=!0)}}),i?{hasDuplicates:!0}:null}}function V(r){if(!r||!r.errors)return;let m=r.errors,e=F({},m);e.dateRange!==void 0&&delete e.dateRange,Object.keys(e).length===0?r.setErrors(null):r.setErrors(e)}function Ge(r,m){return e=>{if(!(e instanceof ge))return null;let i=e.get(r),t=e.get(m);if(!i?.value||!t?.value)return V(i),V(t),null;let n=new Date(i.value),o=new Date(t.value);return n.setHours(0,0,0,0),o.setHours(0,0,0,0),n.getTime()>o.getTime()?(t.setErrors(O(F({},t.errors),{dateRange:{message:"La fecha final no puede ser anterior a la fecha inicial.",actual:t.value,target:i.value}})),t.touched||t.markAsTouched(),V(i),{dateRangeInvalid:!0}):(V(i),V(t),null)}}var Ke=(r,m)=>m.fieldName,et=(r,m)=>m.id,tt=()=>[1,2,3,4];function it(r,m){if(r&1&&(l(0,"div",8),v(1,"span",7),l(2,"mat-form-field",9),v(3,"input",10),s()()),r&2){let e=g(2);a(),c("appSkeleton",e.isLoadingSig()),a(),c("appSkeleton",e.isLoadingSig())}}function rt(r,m){if(r&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),A(4,it,4,2,"div",4),s()()(),l(5,"div",5)(6,"button",6)(7,"mat-icon",7),f(8,"remove_circle"),s()(),l(9,"button",6)(10,"mat-icon",7),f(11,"add_circle"),s()()()()),r&2){let e=g();a(4),c("ngForOf",re(3,tt)),a(3),c("appSkeleton",e.isLoadingSig()),a(3),c("appSkeleton",e.isLoadingSig())}}function nt(r,m){if(r&1&&(l(0,"label",17),f(1),s()),r&2){let e=g(),i=e.$implicit,t=e.$index;c("for",i.fieldName+t),a(),j(" ",i.label," ")}}function ot(r,m){if(r&1&&(l(0,"mat-form-field",18)(1,"mat-label"),f(2),s(),v(3,"input",21),s()),r&2){let e,i=g(),t=i.$implicit,n=i.$index;c("id",t.fieldName+n)("appReadOnly",t.isReadOnly),a(2),R(t.label),a(),c("type",t.fieldType)("formControlName",t.fieldName)("placeholder",(e=t.placeHolder)!==null&&e!==void 0?e:t.fieldName)}}function at(r,m){if(r&1&&(l(0,"mat-form-field",18)(1,"mat-label"),f(2),s(),v(3,"input",21),s()),r&2){let e,i=g(),t=i.$implicit,n=i.$index;c("id",t.fieldName+n)("appReadOnly",t.isReadOnly),a(2),R(t.label),a(),c("type",t.fieldType)("formControlName",t.fieldName)("placeholder",(e=t.placeHolder)!==null&&e!==void 0?e:t.fieldName)}}function lt(r,m){if(r&1&&(l(0,"mat-form-field",18)(1,"mat-label"),f(2),s(),v(3,"input",21),s()),r&2){let e,i=g(),t=i.$implicit,n=i.$index;c("id",t.fieldName+n)("appReadOnly",t.isReadOnly),a(2),R(t.label),a(),c("type",t.fieldType)("formControlName",t.fieldName)("placeholder",(e=t.placeHolder)!==null&&e!==void 0?e:t.fieldName)}}function st(r,m){if(r&1&&(l(0,"div",19),v(1,"app-date-input",22),s()),r&2){let e,i,t,n=g(),o=n.$implicit,d=n.$index;a(),c("id",o.fieldName+d)("formControlName",o.fieldName)("label",(e=o.label)!==null&&e!==void 0?e:"")("placeholder",(i=(i=o.placeHolder)!==null&&i!==void 0?i:o.label)!==null&&i!==void 0?i:"")("isDisabled",!1)("isReadOnly",(t=o.isReadOnly)!==null&&t!==void 0?t:!1)}}function dt(r,m){if(r&1&&(l(0,"mat-option",24),f(1),s()),r&2){let e=m.$implicit;c("value",e.id),a(),j(" ",e.description," ")}}function mt(r,m){if(r&1&&(l(0,"mat-form-field",18)(1,"mat-label"),f(2),s(),l(3,"mat-select",23),L(4,dt,2,2,"mat-option",24,et),s()()),r&2){let e=g(),i=e.$implicit,t=e.$index,n=g().$implicit,o=g(2);c("id",i.fieldName+t)("appReadOnly",i.isReadOnly),a(2),R(i.fieldName),a(),c("formControlName",i.fieldName),a(),$(o.getOptionsForField(i.fieldName,n))}}function ct(r,m){if(r&1&&(l(0,"mat-radio-button",24),f(1),s()),r&2){let e=m.$implicit;c("value",e.value),a(),j(" ",e.optionName," ")}}function pt(r,m){if(r&1&&(l(0,"div",20)(1,"mat-radio-group",25),A(2,ct,2,2,"mat-radio-button",26),s()()),r&2){let e=g().$implicit;a(),c("appReadOnly",e.isReadOnly)("formControlName",e.fieldName),a(),c("ngForOf",e.radioOptions)}}function ut(r,m){if(r&1&&(l(0,"div",8),A(1,nt,2,2,"label",17)(2,ot,4,6,"mat-form-field",18)(3,at,4,6,"mat-form-field",18)(4,lt,4,6,"mat-form-field",18)(5,st,2,6,"div",19)(6,mt,6,4,"mat-form-field",18)(7,pt,3,3,"div",20),s()),r&2){let e=m.$implicit;a(),y(1,e.label?1:-1),a(),y(2,e.fieldType==="text"?2:-1),a(),y(3,e.fieldType==="email"?3:-1),a(),y(4,e.fieldType==="number"?4:-1),a(),y(5,e.fieldType==="date"?5:-1),a(),y(6,e.fieldType==="select"?6:-1),a(),y(7,e.fieldType==="radio-button"?7:-1)}}function ft(r,m){if(r&1){let e=B();l(0,"button",27),x("click",function(){k(e);let t=g(3);return P(t.addRow())}),l(1,"mat-icon"),f(2,"add_circle"),s()()}if(r&2){let e=g(3);c("disabled",!e.isReadyToAdd())}}function gt(r,m){if(r&1){let e=B();l(0,"div",13)(1,"div",2)(2,"div",3),L(3,ut,8,7,"div",8,Ke),s()(),l(5,"div",5)(6,"button",15),x("click",function(){let t=k(e).$index,n=g(2);return P(n.removeRow(t))}),l(7,"mat-icon"),f(8,"remove_circle"),s()(),A(9,ft,3,1,"button",16),s()()}if(r&2){let e=m.$index,i=g(2);c("formGroupName",e),a(3),$(i.formArrayConfig),a(6),y(9,e===i.rows.controls.length-1?9:-1)}}function _t(r,m){if(r&1){let e=B();l(0,"div",14),v(1,"app-feedback",28),l(2,"button",29),x("click",function(){k(e);let t=g(2);return P(t.addRow())}),f(3," Agregar "),s()()}r&2&&(a(),c("message","No hay datos. Haga clic en agregar para a\xF1adir una nueva fila."))}function ht(r,m){if(r&1&&(l(0,"form",11)(1,"div",12),L(2,gt,10,2,"div",13,ie().trackByFn,!0),s(),A(4,_t,4,1,"div",14),s()),r&2){let e=g();c("formGroup",e.mainForm),a(2),$(e.rows.controls),a(2),y(4,e.rows.controls.length===0&&!e.isLoadingSig()?4:-1)}}var Ue=(()=>{class r{get rows(){return this.mainForm.get("rows")}constructor(){this.formArrayConfig=[],this.data=null,this.selectItemsOverridesSig=D({}),this.lastOverrideSig=D(null),this.isLoadingSig=D(!0),this.emitFormArrayValue=new X,this.fieldChange=new X,this.availableOptionsMapSig=S(new Map),this._selectedValuesByFieldSig=S({}),this._valueChangesSubscription=new N,this.isInitialized=!1,this._originalSelectItemsMap=new Map,this._fb=C(xe),this._createFormArray()}ngOnChanges(e){let i=e.formArrayConfig&&this.formArrayConfig.length>0,t=e.data;if(i&&!this.isInitialized)this._initFormStructure(),this.isInitialized=!0;else if(this.isInitialized){if(i){this.initializeSelectMaps();let n=z(this.formArrayConfig);this.rows.setValidators(n)}t&&this._resetAndLoadRows(this.data||[]),this._applyOverridesAndResetControls(),this._calculateSelectAvailableOptions(),this.rows.updateValueAndValidity()}}ngOnInit(){this.setupValueChangeSubscription()}ngOnDestroy(){this._valueChangesSubscription.unsubscribe()}trackByFn(e,i){return i.value}isReadyToAdd(){return this.maxRows!==null&&this.rows.length>=this.maxRows?!1:this.mainForm.valid}getOptionsForField(e,i){let n=i.get(e).value,o=this.formArrayConfig.find(w=>w.fieldName===e),d=this.availableOptionsMapSig().get(e)||[],_=this.rows.controls.indexOf(i),p=this.selectItemsOverridesSig()[e]?.get(_)??void 0;if(p&&p.length>0)return p;if(o?.isRepeated||n===null)return d;let M=(this._selectedValuesByFieldSig()[e]||[]).filter(w=>w===n).length,b=(this._originalSelectItemsMap.get(e)||[]).find(w=>w.id===n);if(M<=1){if(!d.some(W=>W.id===n)&&b)return[...d,b].sort((W,Qe)=>{let Xe=W.description.toString().toLowerCase(),Ye=Qe.description.toString().toLowerCase();return Xe.localeCompare(Ye)})}else return b?[b]:[];return d}createRowGroup(e={},i){let t={},n=[],o=null,d=null;for(let p of this.formArrayConfig){let h=this._getValidators(p),M=e[p.fieldName]??null;t[p.fieldName]=this._fb.control(M,h);let G=p.validations?.find(b=>b.type===u.validateRange&&typeof b.value=="string");G&&(d=p.fieldName,o=G.value)}o&&d&&n.push(Ge(o,d));let _=this._fb.group(t,{validators:n});return i!==void 0&&this.formArrayConfig.forEach(p=>{if(p.emitChangeToParent){let h=_.get(p.fieldName);h&&this._valueChangesSubscription.add(h.valueChanges.pipe(Q(100)).subscribe(M=>{this.fieldChange.emit({fieldName:p.fieldName,value:M,indexRow:i})}))}}),_}addRow(){if(this.maxRows!==null&&this.rows.length>=this.maxRows)return;this.formArrayConfig.map(i=>(i.isReadOnly&&(i.isReadOnly=!1),i));let e=this.rows.length;this.rows.push(this.createRowGroup({},e)),this.rows.markAsDirty()}removeRow(e){this.rows.removeAt(e),this.rows.markAsDirty()}_initFormStructure(){this.initializeSelectMaps();let e=z(this.formArrayConfig);this.rows.setValidators(e),this.rows.updateValueAndValidity(),this.data&&this.data.length>0?this._resetAndLoadRows(this.data):this.rows.length===0&&this.addRow(),this._calculateSelectAvailableOptions()}_createFormArray(){let e=[],i=this.formArrayConfig.find(t=>t.isRepeated===!1);i&&e.push(z([i])),this.mainForm=this._fb.group({rows:this._fb.array([],{validators:e})})}_resetAndLoadRows(e){this.rows.clear(),this._valueChangesSubscription.unsubscribe(),this._valueChangesSubscription=new N,this.setupValueChangeSubscription(),e.forEach((i,t)=>{let n=this._flattenObject(i);this.rows.push(this.createRowGroup(n,t))}),this.mainForm.markAsPristine()}_flattenObject(e){let i={};function t(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(n,o)){let d=n[o];typeof d=="object"&&d!==null&&!Array.isArray(d)?t(d):i[o]=d}}return t(e),i}initializeSelectMaps(){this.formArrayConfig.forEach(e=>{e.fieldType==="select"&&e.selectItems&&this._originalSelectItemsMap.set(e.fieldName,[...e.selectItems])})}setupValueChangeSubscription(){this._valueChangesSubscription.unsubscribe(),this._valueChangesSubscription=new N,this._valueChangesSubscription.add(this.rows.valueChanges.subscribe(()=>{this._calculateSelectAvailableOptions()})),this._valueChangesSubscription.add(this.rows.statusChanges.pipe(Q(300)).subscribe(e=>{e==="VALID"?this.emitFormArrayValue.emit(this.rows.value):this.emitFormArrayValue.emit(null)}))}_calculateSelectAvailableOptions(){let e=new Map,i={};this.formArrayConfig.forEach(t=>{if(t.fieldType==="select"&&!t.isRepeated){let n=[];this.rows.controls.forEach(o=>{let d=o.get(t.fieldName);d?.value!=null&&n.push(d.value)}),i[t.fieldName]=n}}),this._selectedValuesByFieldSig.set(i),this.formArrayConfig.forEach(t=>{let n=this._originalSelectItemsMap.get(t.fieldName);if(t.fieldType==="select"&&n)if(t.isRepeated)e.set(t.fieldName,n);else{let o=i[t.fieldName]||[],d=new Set(o),_=n.filter(p=>!d.has(p.id));e.set(t.fieldName,_)}}),this.availableOptionsMapSig.set(e)}_getValidators(e){let i=[];if(e.validations)for(let t of e.validations){if(t.type===u.validateRange)continue;let n=t.value;switch(t.type){case u.required:i.push(E.required);break;case u.minLength:n&&typeof n=="number"&&i.push(E.minLength(n));break;case u.maxLength:n&&typeof n=="number"&&i.push(E.maxLength(n));break;case u.email:i.push(E.email);break;default:console.warn(`Validation type ${t.type} not recognized.`)}}return i}_applyOverridesAndResetControls(){let e=this.rows,i=this.lastOverrideSig();if(!i)return;let{fieldName:t,rowIndex:n}=i;if(e&&e.length>n){let d=e.at(n).get(t);d&&d.setValue(null)}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=I({type:r,selectors:[["app-form-array"]],inputs:{id:"id",formArrayConfig:"formArrayConfig",data:"data",maxRows:"maxRows",selectItemsOverridesSig:[T.SignalBased,"selectItemsOverridesSig"],lastOverrideSig:[T.SignalBased,"lastOverrideSig"],isLoadingSig:[T.SignalBased,"isLoadingSig"]},outputs:{emitFormArrayValue:"emitFormArrayValue",fieldChange:"fieldChange"},standalone:!0,features:[te,H],decls:2,vars:1,consts:[[1,"skeleton-layout"],[1,"row-container"],[1,"fields-wrapper"],[1,"grid"],["class","inputs-container",4,"ngFor","ngForOf"],[1,"actions-container"],["mat-icon-button",""],[3,"appSkeleton"],[1,"inputs-container"],["appearance","outline",3,"appSkeleton"],["matInput",""],[3,"formGroup"],["formArrayName","rows"],[1,"row-container",3,"formGroupName"],[1,"feedback-container"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"disabled"],[3,"for"],["appearance","outline",1,"width",3,"id","appReadOnly"],[1,"component-container"],[1,"radio-group-container"],["matInput","","appCustomValidationMessage","",3,"type","formControlName","placeholder"],["appCustomValidationMessage","",1,"width",3,"id","formControlName","label","placeholder","isDisabled","isReadOnly"],["appCustomValidationMessage","",3,"formControlName"],[3,"value"],["appCustomValidationMessage","",3,"appReadOnly","formControlName"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click","disabled"],[3,"message"],["mat-raised-button","","color","primary",1,"add-row-button",3,"click"]],template:function(i,t){i&1&&A(0,rt,12,4,"div",0)(1,ht,5,2),i&2&&y(0,t.isLoadingSig()?0:1)},dependencies:[q,ne,be,_e,pe,ue,fe,Fe,he,ve,ye,Ce,we,Ae,Se,Me,Oe,me,se,de,De,Ie,ae,Ne,Ve,le,Re,ze,He,qe,ce,ke,Pe,Te],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;min-height:50px}.row-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;margin-bottom:20px;width:100%;flex-direction:column}.fields-wrapper[_ngcontent-%COMP%]{flex-grow:1;width:100%;padding:20px;border:1px solid #ddd;border-radius:4px;box-shadow:0 1px 1px #0000000d}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:15px;width:100%}.inputs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputs-container[_ngcontent-%COMP%]   .width[_ngcontent-%COMP%]{width:100%}.actions-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:10px;padding-top:5px}.feedback-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-grow:1;width:100%;height:100%;text-align:center;gap:20px}@media (min-width: 600px){.fields-wrapper[_ngcontent-%COMP%]{width:100%}.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:20px 15px}.actions-container[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;padding-top:0}}@media (min-width: 1024px){.fields-wrapper[_ngcontent-%COMP%]{width:100%}.row-container[_ngcontent-%COMP%]{flex-direction:row;width:100%}.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:20px;align-items:start}.actions-container[_ngcontent-%COMP%]{flex-direction:row;align-self:flex-start;justify-content:flex-end;min-width:100px}}@media (min-width: 1440px){.fields-wrapper[_ngcontent-%COMP%]{width:100%}.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:20px;align-items:start}.inputs-container[_ngcontent-%COMP%]:nth-child(5), .inputs-container[_ngcontent-%COMP%]:nth-child(9){grid-column:unset;grid-row:unset}}.skeleton-layout[_ngcontent-%COMP%]{display:flex;gap:10px}",'.skeleton-loading[_ngcontent-%COMP%]{color:transparent!important;background-color:transparent!important;border-color:transparent!important;position:relative;overflow:hidden;pointer-events:none;min-height:1em}.skeleton-loading[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:4px;z-index:10;background:linear-gradient(90deg,#eee 25%,#ddd,#eee 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}mat-form-field.skeleton-loading[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:4px;z-index:10;background:linear-gradient(90deg,#eee 25%,#ddd,#eee 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}button.skeleton-loading[_ngcontent-%COMP%]{background-color:#f0f0f0!important;color:transparent!important;box-shadow:none!important;position:relative;overflow:hidden}button.skeleton-loading[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;z-index:10;background:linear-gradient(90deg,#eee 25%,#ddd,#eee 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}'],changeDetection:0})}}return r})();var Je=(()=>{class r{constructor(){this.apiUrl="https://json-server-data-fpl9.onrender.com/provinces",this._httpClient=C(oe)}getProvinces(){return this._httpClient.get(this.apiUrl)}getProvincesById(e){return this._httpClient.get(`${this.apiUrl}/${e}`)}getProvincesByCountry(e){let i=`${this.apiUrl}?countryId=${e}`;return this._httpClient.get(i)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=ee({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var xi=(()=>{class r{constructor(){this.isLoadingSig=S(!0),this.selectItemsOverridesSig=S({}),this.lastOverrideSig=S(null),this.formArrayConfig1=[],this.formArrayConfig2=[],this.formArrayConfig3=[],this.formArrayConfig4=[],this.formArrayConfig5=[],this.formArrayWithChangeEvent=[],this.formArrayWithChangeId="formWithChange",this.employeeData1=[{country:1,gender:1,position:1,email:"juan.perez@empresa.com"},{country:2,gender:2,position:2,email:"ana.lopez@empresa.com"}],this.employeeData2=[{startDate:"2023-01-15",endDate:"2023-12-31",country:1,email:"juan.perez@empresa.com"},{startDate:"2024-03-01",endDate:"2024-05-30",country:1,email:"ana.lopez@empresa.com"}],this.employeeData3=[],this._positionServices=C(Le),this._countryServices=C($e),this._alertService=C(Ee),this._breadcrumbService=C(Be),this._provinceService=C(Je),this._positions=[],this._countries=[],this._genders=[{id:0,description:"No binario"},{id:1,description:"Masculino"},{id:2,description:"Femenino"}],this._alertService.clearAlerts()}ngOnInit(){this._setBreadcrumb(),this._loadData()}ngOnDestroy(){this._breadcrumbService.clearBreadcrumbs()}getFormArray1Value(e){console.log("Valor FormArray 1:",e)}getFormArray2Value(e){console.log("Valor FormArray 2:",e)}getFormArray3Value(e){console.log("Valor FormArray 3:",e)}getFormArray5Value(e){console.log("Valor FormArray 5:",e)}getFormArrayWithChangeEventValue(e){console.log("Valor FormArray con evento de cambio:",e)}handleFieldChange(e){let{fieldName:i,value:t,indexRow:n}=e;if(i==="country"){let o=t;this._provinceService.getProvincesByCountry(o).subscribe(d=>{let _=d.map(p=>({id:p.id,description:p.description}));this.selectItemsOverridesSig.update(p=>{let h=p.province?new Map(p.province):new Map;return h.set(n,_),O(F({},p),{province:h})}),this.lastOverrideSig.set({fieldName:"province",rowIndex:n})})}}_loadData(){this.isLoadingSig.set(!0),K({positions:this._getPositions(),countries:this._getCountries()}).subscribe({next:e=>{this._positions=e.positions,this._countries=e.countries,this._setFormArray1(),this._setFormArray2(),this._setFormArray3(),this._setFormArrayWithChangeEvent(),this._setFormArrayRadioButton(),this.isLoadingSig.set(!1)},error:()=>{this.isLoadingSig.set(!1),this._alertService.showDanger("Error al cargar datos.")}})}_setFormArray1(){this.formArrayConfig1=[{fieldName:"country",fieldType:"select",selectItems:this._countries,label:"Pa\xEDs",placeHolder:"Selecciona un pa\xEDs",validations:[{type:u.required}],isRepeated:!0},{fieldName:"gender",fieldType:"select",selectItems:this._genders,label:"G\xE9nero",placeHolder:"Selecciona el g\xE9nero",validations:[{type:u.required}],isRepeated:!0},{fieldName:"position",fieldType:"select",selectItems:this._positions,label:"Puesto",placeHolder:"",validations:[{type:u.required}],isRepeated:!0},{fieldName:"email",fieldType:"email",label:"Email",placeHolder:"Ej: usuario@dominio.com",validations:[{type:u.required},{type:u.email}],isRepeated:!0}]}_setFormArray2(){this.formArrayConfig2=[{fieldName:"country",fieldType:"select",selectItems:this._countries,label:"Pa\xEDs",placeHolder:"Selecciona un pa\xEDs",validations:[{type:u.required}],isRepeated:!1},{fieldName:"position",fieldType:"select",selectItems:this._positions,label:"Puesto",placeHolder:"",validations:[{type:u.required}],isRepeated:!1},{fieldName:"date",fieldType:"date",label:"Fecha",placeHolder:"",validations:[{type:u.required}],isRepeated:!1},{fieldName:"email",fieldType:"email",label:"Email",placeHolder:"Ej: usuario@dominio.com",validations:[{type:u.required},{type:u.email}],isRepeated:!1}]}_setFormArray3(){this.formArrayConfig3=[{fieldName:"startDate",fieldType:"date",label:"Fecha Desde",validations:[{type:u.required}],isRepeated:!0},{fieldName:"endDate",fieldType:"date",label:"Fecha Hasta",validations:[{type:u.required},{type:u.validateRange,value:"startDate"}],isRepeated:!0},{fieldName:"email",fieldType:"email",label:"Email",placeHolder:"Ej: usuario@dominio.com",validations:[{type:u.email}],isRepeated:!1,isReadOnly:!0}]}_setFormArrayRadioButton(){this.formArrayConfig5=[{fieldName:"name",fieldType:"text",label:"Nombre",isRepeated:!0,validations:[{type:u.required}]},{fieldName:"surname",fieldType:"text",label:"Apellido",isRepeated:!0,validations:[{type:u.required}]},{fieldName:"gender",fieldType:"radio-button",label:"Elija un G\xE9nero *",radioOptions:[{value:"1",optionName:"Masculino"},{value:"2",optionName:"Femenino"},{value:"0",optionName:"Binario"}],validations:[{type:u.required}],isRepeated:!0}]}_setFormArrayWithChangeEvent(){this.formArrayWithChangeEvent=[{fieldName:"country",fieldType:"select",label:"Pa\xEDs",placeHolder:"Pais",selectItems:[{id:1,description:"Argentina"},{id:2,description:"Bolivia"}],isRepeated:!0,emitChangeToParent:!0},{fieldName:"province",fieldType:"select",label:"Provincia",placeHolder:"Provincia",selectItems:[],isRepeated:!0}]}_getPositions(){return this._positionServices.getPositions().pipe(J(()=>(this._alertService.showDanger("Error al cargar la lista de puestos."),U([]))))}_getCountries(){return this._countryServices.getCountries().pipe(J(()=>(this._alertService.showDanger("Error al cargar la lista de paises."),U([]))))}_setBreadcrumb(){this._breadcrumbService.setBreadcrumbs([{label:"Inicio",path:"/home"},{label:"Form-array",path:""}])}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=I({type:r,selectors:[["app-employee-form-array"]],standalone:!0,features:[H],decls:22,vars:24,consts:[[1,"main-container"],[1,"example1"],[3,"emitFormArrayValue","id","formArrayConfig","data","isLoadingSig","maxRows"],[1,"example2"],[3,"emitFormArrayValue","id","formArrayConfig","isLoadingSig","maxRows"],[1,"example3"],[3,"emitFormArrayValue","id","formArrayConfig","data","isLoadingSig"],[1,"example4"],[3,"emitFormArrayValue","fieldChange","id","formArrayConfig","data","isLoadingSig","maxRows","selectItemsOverridesSig","lastOverrideSig"],[1,"example5"]],template:function(i,t){i&1&&(l(0,"div",0),v(1,"app-breadcrumb"),l(2,"div",1)(3,"h5"),f(4," Configuraci\xF3n: Todos los campos se pueden repetir, todos son obligatorios. M\xE1ximo de filas 5 "),s(),l(5,"app-form-array",2),x("emitFormArrayValue",function(o){return t.getFormArray1Value(o)}),s()(),l(6,"div",3)(7,"h5"),f(8," Configuraci\xF3n: Ningun campo se puede repetir, todos son obligatorios. M\xE1ximo de filas 3. "),s(),l(9,"app-form-array",4),x("emitFormArrayValue",function(o){return t.getFormArray2Value(o)}),s()(),l(10,"div",5)(11,"h5"),f(12," Configuraci\xF3n: Validaci\xF3n de rango de fechas y campos solo lectura "),s(),l(13,"app-form-array",6),x("emitFormArrayValue",function(o){return t.getFormArray3Value(o)}),s()(),l(14,"div",7)(15,"h5"),f(16," Configuraci\xF3n: Campos con evento de cambio, el componente padre carga las provincias seg\xFAn el pais elegido. M\xE1ximo de filas 2. "),s(),l(17,"app-form-array",8),x("emitFormArrayValue",function(o){return t.getFormArrayWithChangeEventValue(o)})("fieldChange",function(o){return t.handleFieldChange(o)}),s()(),l(18,"div",9)(19,"h5"),f(20,"Configuraci\xF3n: Con Radio-button. M\xE1ximo de filas 3"),s(),l(21,"app-form-array",4),x("emitFormArrayValue",function(o){return t.getFormArray5Value(o)}),s()()()),i&2&&(a(5),c("id","form1")("formArrayConfig",t.formArrayConfig1)("data",t.employeeData1)("isLoadingSig",t.isLoadingSig())("maxRows",5),a(4),c("id","form2")("formArrayConfig",t.formArrayConfig2)("isLoadingSig",t.isLoadingSig())("maxRows",3),a(4),c("id","form3")("formArrayConfig",t.formArrayConfig3)("data",t.employeeData2)("isLoadingSig",t.isLoadingSig()),a(4),c("id","formWithChange")("formArrayConfig",t.formArrayWithChangeEvent)("data",t.employeeData3)("isLoadingSig",t.isLoadingSig())("maxRows",2)("selectItemsOverridesSig",t.selectItemsOverridesSig())("lastOverrideSig",t.lastOverrideSig()),a(4),c("id","formArrayWithRadioButton")("formArrayConfig",t.formArrayConfig5)("isLoadingSig",t.isLoadingSig())("maxRows",3))},dependencies:[Ue,je,q],styles:['@charset "UTF-8";.main-container[_ngcontent-%COMP%]{padding:20px 0}.example1[_ngcontent-%COMP%], .example2[_ngcontent-%COMP%], .example3[_ngcontent-%COMP%], .example4[_ngcontent-%COMP%], .example5[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto 50px}h5[_ngcontent-%COMP%]{padding:20px;letter-spacing:.1em;background-color:#f0f4f9;font-weight:400;color:#3f51b5;border:1px solid #e4e7f6;width:100%}'],changeDetection:0})}}return r})();export{xi as EmployeeFormArrayComponent};
