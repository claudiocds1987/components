import{a as ye,b as xe,c as ve,d as Te}from"./chunk-SPPO7YFN.js";import"./chunk-JIAQZAXE.js";import{a as Le,b as ze}from"./chunk-22RIDEX4.js";import{a as Ge,e as Ne}from"./chunk-UNNSDSQF.js";import{a as Se}from"./chunk-EJTDO335.js";import{a as be}from"./chunk-Q6UAVVOY.js";import"./chunk-SFWTOUAD.js";import{a as Pe,b as Me,c as we,d as ke,e as Oe,f as J,i as Ee}from"./chunk-64PMGA5Q.js";import{a as ge}from"./chunk-GDMQ7NQL.js";import{a as Fe,b as De,c as Ie,d as Re,e as Ae,f as Be}from"./chunk-VXZZXDIS.js";import{z as D}from"./chunk-5YESZIAT.js";import{B as ue,C as H,D as Ce,b as I,g as R,h as A,i as B,k,l as fe,n as L,q as z,t as $,u as V,v as he,y as q,z as j}from"./chunk-BMLLSFUZ.js";import{aa as T,d as le,ha as de,j as pe,na as me,oa as ce,pa as N,qa as _e}from"./chunk-FRIGIZR4.js";import{Aa as G,Ab as ee,Bb as p,Ca as Q,Cb as d,D as Y,Db as C,Eb as ie,Fb as re,Jc as M,Kb as F,L as K,Mb as h,Pb as oe,Ub as ne,Vb as u,Wb as v,Xa as l,Xb as ae,a as b,ac as P,b as y,ea as g,hb as f,ja as E,ka as x,nb as W,nc as se,p as U,pb as m,rb as w,t as O,wb as X,y as te,zb as Z}from"./chunk-Y3ZRIA3V.js";var Ve=(()=>{class n{constructor(){this.label="Rango de fechas",this.appSkeleton=!1}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-date-range"]],inputs:{label:"label",appSkeleton:"appSkeleton",dateRangeFormGroup:"dateRangeFormGroup"},standalone:!0,features:[P],decls:10,vars:4,consts:[["picker",""],[3,"formGroup"],["appearance","outline",1,"mat-form-field-width"],[3,"rangePicker"],["matStartDate","","formControlName","startDate","placeholder","Desde"],["matEndDate","","formControlName","endDate","placeholder","Hasta"],["matSuffix","",3,"for"]],template:function(t,i){if(t&1&&(p(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),u(3),d(),p(4,"mat-date-range-input",3),C(5,"input",4)(6,"input",5),d(),C(7,"mat-datepicker-toggle",6)(8,"mat-date-range-picker",null,0),d()()),t&2){let r=ne(9);m("formGroup",i.dateRangeFormGroup),l(3),v(i.label),l(),m("rangePicker",r),l(3),m("for",r)}},dependencies:[M,$,I,R,A,L,z,j,q,V,he,H,J,Pe,ke,Me,we,Oe,N,T],styles:[".mat-form-field-width[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return n})();var Je=(n,c)=>c.fieldName,Ue=(n,c)=>c.id;function Ye(n,c){if(n&1&&(p(0,"mat-form-field",11)(1,"mat-label"),u(2),d(),C(3,"input",12),d()),n&2){let e=h().$implicit,t=h();m("appSkeleton",t.isLoadingSig()),l(2),v(e.label),l(),m("formControlName",e.fieldName)}}function Ke(n,c){if(n&1&&(p(0,"mat-option",14),u(1),d()),n&2){let e=c.$implicit;m("value",e.id),l(),ae(" ",e.description," ")}}function Qe(n,c){if(n&1&&(p(0,"mat-form-field",11)(1,"mat-label"),u(2),d(),p(3,"mat-select",13),Z(4,Ke,2,2,"mat-option",14,Ue),d()()),n&2){let e=h().$implicit,t=h();m("appSkeleton",t.isLoadingSig()),l(2),v(e.label),l(),m("formControlName",e.fieldName),l(),ee(e.selectItems)}}function We(n,c){if(n&1&&C(0,"app-date-input",15),n&2){let e=h().$implicit,t=h();m("formControlName",e.fieldName)("label",e.label)("placeholder",e.label)("isDisabled",!1)("appSkeleton",t.isLoadingSig())}}function Xe(n,c){if(n&1&&C(0,"app-date-range",16),n&2){let e=h(2).$implicit,t=h();m("dateRangeFormGroup",c)("label",e.label)("appSkeleton",t.isLoadingSig())}}function Ze(n,c){if(n&1&&W(0,Xe,1,3,"app-date-range",16),n&2){let e,t=h().$implicit,i=h();X(0,(e=i.getFormGroupByName(t.fieldName))?0:-1,e)}}function et(n,c){if(n&1&&W(0,Ye,4,3)(1,Qe,6,3)(2,We,1,5)(3,Ze,1,1),n&2){let e,t=c.$implicit;X(0,(e=t.fieldType)==="text"?0:e==="select"?1:e==="date"?2:e==="dateRangeComponent"?3:-1)}}var qe=(()=>{class n{constructor(){this.configSig=G([]),this.filterFormSig=G.required(),this.isLoadingSig=G(!1),this.emitFilterApplied=new Q,this.isCollapsedChange=new Q,this.isCollapsedSig=f(!1)}getFormGroupByName(e){return this.filterFormSig().get(e)}toggleCollapse(){this.isCollapsedSig.update(e=>{let t=!e;return this.isCollapsedChange.emit(t),t})}hasActiveFilters(){let e=this.filterFormSig(),t=this.configSig();if(!e||!t)return!1;let i=r=>{if(r==null)return!0;if(typeof r=="string"){let o=r.trim().toLowerCase();if(o===""||o==="all")return!0}return typeof r=="number"&&r===0};for(let r of t){let o=r.fieldName,a=e.get(o)?.value;if(r.fieldType!=="dateRangeComponent"){if(!i(a))return!0}else{let s=this.getFormGroupByName(o);if(s){let _=s.get("startDate")?.value,S=s.get("endDate")?.value;if(!i(_)||!i(S))return!0}}}return!1}applyFilter(){let e=this.filterFormSig().value;this.emitFilterApplied.emit(e),this.filterFormSig().markAsPristine()}clearFilter(){this.filterFormSig().reset(),this.filterFormSig().markAsPristine(),this.filterFormSig().markAsUntouched();let e=this.filterFormSig().value;this.emitFilterApplied.emit(e)}isReadyToApply(){return!this.filterFormSig()?.valid||!this.filterFormSig()?.dirty}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-grid-filter"]],inputs:{configSig:[E.SignalBased,"configSig"],filterFormSig:[E.SignalBased,"filterFormSig"],isLoadingSig:[E.SignalBased,"isLoadingSig"]},outputs:{emitFilterApplied:"emitFilterApplied",isCollapsedChange:"isCollapsedChange"},standalone:!0,features:[P],decls:17,vars:9,consts:[[1,"filter-panel"],[1,"form",3,"ngSubmit","formGroup"],[1,"form-header"],["type","button","mat-icon-button","","matTooltipPosition","left",1,"toggle-button",3,"click","matTooltip"],[1,"collapsed-icon"],[1,"title"],[1,"form-content"],[1,"form-fields"],[1,"filter-actions"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["mat-button","","color","primary",3,"click","disabled"],["appearance","outline",1,"width",3,"appSkeleton"],["matInput","",3,"formControlName"],[3,"formControlName"],[3,"value"],[3,"formControlName","label","placeholder","isDisabled","appSkeleton"],[3,"dateRangeFormGroup","label","appSkeleton"]],template:function(t,i){t&1&&(p(0,"div",0)(1,"form",1),F("ngSubmit",function(){return i.applyFilter()}),p(2,"div",2)(3,"button",3),F("click",function(){return i.toggleCollapse()}),p(4,"mat-icon",4),u(5),d()(),p(6,"h3",5),u(7,"FILTRO"),d()(),p(8,"div",6)(9,"div",7),Z(10,et,4,1,null,null,Je),d(),p(12,"div",8)(13,"button",9),u(14," Aplicar Filtro "),d(),p(15,"button",10),F("click",function(){return i.clearFilter()}),u(16," Limpiar Filtro "),d()()()()()),t&2&&(w("collapsed",i.isCollapsedSig()),l(),m("formGroup",i.filterFormSig()),l(2),oe("matTooltip",i.isCollapsedSig()?"Mostrar Filtro":"Ocultar Filtro"),l(2),v(i.isCollapsedSig()?"chevron_left":"chevron_right"),l(3),w("hidden",i.isCollapsedSig()),l(2),ee(i.configSig()),l(3),m("disabled",i.isReadyToApply()),l(2),m("disabled",!i.hasActiveFilters()))},dependencies:[M,$,fe,I,R,A,L,z,j,q,V,H,ue,De,Fe,de,J,T,N,me,ce,Ee,Ve,ge,_e,xe],styles:["[_nghost-%COMP%]{height:100%;overflow:hidden}.filter-panel[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;transition:width .3s ease-in-out}.filter-panel.collapsed[_ngcontent-%COMP%]{width:100%}.filter-panel.collapsed[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:center;align-items:center;width:100%;margin-top:20px}.filter-panel.collapsed[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .title[_ngcontent-%COMP%]{display:none}.form[_ngcontent-%COMP%]{padding:15px 15px 0;background-color:#fff;box-sizing:border-box;height:100%;display:flex;flex-direction:column}.form-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:15px}.toggle-button[_ngcontent-%COMP%]{background-color:#f0f4f9;color:#3f51b5;border:1px solid #3f51b5;border-radius:50%;box-shadow:0 2px 5px #0000001a;height:32px;width:32px;padding:0;line-height:32px;margin:0}.filter-panel.collapsed[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{position:static;left:auto;transform:translateY(-50%)}.collapsed-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px;line-height:20px!important}.title[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;letter-spacing:.1875rem;margin:0 0 20px;height:40px}.form-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;overflow:hidden;opacity:1;height:100%;padding:0;margin:0;pointer-events:auto;transition:opacity .3s ease-in-out,height .3s ease-in-out}.form-content.hidden[_ngcontent-%COMP%]{opacity:0;height:0;padding:0;margin:0;pointer-events:none;overflow:hidden}.form-fields[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-right:5px;padding-top:5px;height:auto}.form-fields[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px;height:6px}.form-fields[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.form-fields[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.form-fields[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@supports not selector(::-webkit-scrollbar){.form-fields[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#c1c1c1 #f1f1f1}}.form-fields[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:15px}.form-fields[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-bottom:15px}.filter-actions[_ngcontent-%COMP%]{flex-shrink:0;display:flex;flex-direction:column;align-items:unset;gap:15px;padding:20px 0;border-top:1px solid #ddd;background-color:#fff}.width[_ngcontent-%COMP%]{width:100%}app-date-input[_ngcontent-%COMP%]{margin-bottom:15px!important;display:block!important}app-date-range[_ngcontent-%COMP%]{margin-bottom:15px!important;display:block!important}.skeleton-loading[_ngcontent-%COMP%]{margin-bottom:30px!important}mat-form-field.skeleton-loading[_ngcontent-%COMP%]{margin-bottom:30px!important}",'.skeleton-loading[_ngcontent-%COMP%]{color:transparent!important;background-color:transparent!important;border-color:transparent!important;position:relative;overflow:hidden;pointer-events:none;min-height:1em}.skeleton-loading[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:4px;z-index:10;background:linear-gradient(90deg,#eee 25%,#ddd,#eee 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}mat-form-field.skeleton-loading[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:4px;z-index:10;background:linear-gradient(90deg,#eee 25%,#ddd,#eee 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}button.skeleton-loading[_ngcontent-%COMP%]{background-color:#f0f0f0!important;color:transparent!important;box-shadow:none!important;position:relative;overflow:hidden}button.skeleton-loading[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;z-index:10;background:linear-gradient(90deg,#eee 25%,#ddd,#eee 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}'],changeDetection:0})}}return n})();var ii=(()=>{class n{constructor(){this.gridFilterConfigSig=f([]),this.gridFilterFormSig=f(new B({})),this.gridConfigSig=f({}),this.gridDataSig=f([]),this.chipsSig=f([]),this.isLoadingGridDataSig=f(!0),this.isLoadingFilterGridDataSig=f(!0),this.isFilterCollapsedSig=f(!1),this.employees=[],this._positions=[],this._countries=[],this._genders=[{id:"all",description:"Todos"},{id:0,description:"No binario"},{id:1,description:"Masculino"},{id:2,description:"Femenino"}],this._defaultChips={gender:"all",position:"all",country:"all",active:"all"},this._queryParams={componentPath:"employee-grid-pagination",componentName:"Grilla Full"},this._employeeFilterParams={},this._employeeServices=g(Ge),this._positionServices=g(Ie),this._countryServices=g(Re),this._exportService=g(Te),this._cdr=g(se),this._spinnerService=g(be),this._breadcrumbService=g(Ae),this._alertService=g(Ce),this._feedbackDialogService=g(Le),this._snackbarService=g(ze),this._defaultPaginatorOptions={pageIndex:0,pageSize:25,pageSizeOptions:[5,10,25,100],totalCount:0,isServerSide:!0},this._router=g(pe),this._alertService.clearAlerts(),this._setBreadcrumb(),this.gridConfigSig.set(this._setGridConfiguration()),this._initializeGridFilter(),this._createChips(this._defaultChips)}ngOnInit(){this._loadData()}ngOnDestroy(){this._breadcrumbService.clearBreadcrumbs()}onFilterCollapseChange(e){this.isFilterCollapsedSig.set(e)}onRowDblClick(e){let t=e;this._editEmployee(t.id)}onCreateEmployee(){this._router.navigate(["/employee/create"],{queryParams:this._queryParams})}applyFilter(e){if(this._employeeFilterParams={},this._setEmployeeFilterParameters(),Object.values(e).every(i=>i===null||i===""||i==="all"||typeof i=="object"&&i!==null&&Object.values(i).every(r=>r===null||r==="")))this._createChips(this._defaultChips),this._initializeGridFilter();else{this._createChips(e);let i=this._mapToEmployeeFilterParams(e);Object.assign(this._employeeFilterParams,i)}this.gridConfigSig().paginator&&(this.gridConfigSig().paginator.pageIndex=0),this._reloadGridData()}onGridSortChange(e){let t=e.active,i=e.direction;this._employeeFilterParams=y(b({},this._employeeFilterParams),{sortColumn:t,sortOrder:i,page:1}),this._updateGridConfigOnSortChange(e),this._reloadGridData()}onGridPageChange(e){this._employeeFilterParams=y(b({},this._employeeFilterParams),{page:e.pageIndex+1,limit:e.pageSize}),this._reloadGridData()}onExportToExcel(){this._spinnerService.show();let e=this.gridFilterFormSig().value,t=this._mapToEmployeeFilterParams(e);this._employeeFilterParams.sortColumn&&(t.sortColumn=this._employeeFilterParams.sortColumn),this._employeeFilterParams.sortOrder&&(t.sortOrder=this._employeeFilterParams.sortOrder),this._employeeServices.getEmployeesForExportJsonServer(t).pipe(O(i=>this._mapEmployeesForExport(i))).subscribe({next:i=>{let r="Empleados.xlsx";setTimeout(()=>{this._exportService.exportToExcel(i,r),this._spinnerService.hide(),this._cdr.markForCheck()},1500)},error:()=>{this._spinnerService.hide(),this._cdr.markForCheck(),this._alertService.showDanger("Error al descargar el archivo de Excel")}})}onRemoveChip(e){let t=e.key,i={position:()=>this.gridFilterFormSig().get(t)?.patchValue("all"),country:()=>this.gridFilterFormSig().get(t)?.patchValue("all"),active:()=>this.gridFilterFormSig().get(t)?.patchValue("all"),gender:()=>this.gridFilterFormSig().get(t)?.patchValue("all"),birthDateRange:()=>this.gridFilterFormSig().get(t)?.patchValue({startDate:null,endDate:null}),default:()=>this.gridFilterFormSig().get(t)?.patchValue(null)};(i[t]||i.default)(),this.applyFilter(this.gridFilterFormSig().value)}_createChips(e){this.chipsSig.set(this._mapToChipsDescription(e))}_mapToChipsDescription(e){let t=[],i=(o,a)=>{let s=o.find(_=>_.id===a);return s?s.description:null},r=(o,a)=>{switch(o){case"position":return`Puesto: ${(typeof a=="number"?i(this._positions,a):null)||"Todos"}`;case"country":return`Pa\xEDs: ${(typeof a=="number"?i(this._countries,a):null)||"Todos"}`;case"gender":return`G\xE9nero: ${(typeof a=="number"?i(this._genders,a):null)||"Todos"}`;case"active":return`Estado: ${a==="all"?"Todos":a?"Activo":"Inactivo"}`;case"birthDateRange":{let s=a,_=s.startDate?D.fromISO(s.startDate).toFormat("dd/MM/yyyy"):"N/A",S=s.endDate?D.fromISO(s.endDate).toFormat("dd/MM/yyyy"):"N/A";return`Fecha de Nacimiento: ${_} - ${S}`}default:return`${o}: ${a}`}};for(let[o,a]of Object.entries(e)){if(a==null||a==="")continue;let s=a!=="all"||["position","country","gender","active"].includes(o),_=a==="all";if(o==="birthDateRange"){let S=a;if(!S.startDate&&!S.endDate)continue}s&&t.push({key:o,label:r(o,a),value:a,disabled:_})}return t}_mapEmployeesForExport(e){return e.map(t=>{let i=t.birthDate,r=i?D.fromISO(i).toFormat("dd/MM/yyyy"):null;return{id:t.id,nombre:t.name||null,apellido:t.surname||null,puesto:this._getPositionDescription(t.positionId),pais:this._getCountryDescription(t.countryId),genero:this._getGenderDescription(t.genderId),estado:typeof t.active=="boolean"?t.active?"Activo":"Inactivo":null,nacimiento:r}})}_setEmployeeFilterParameters(){this._employeeFilterParams={},this._employeeFilterParams.page=1,this._employeeFilterParams.limit=25,this._employeeFilterParams.sortColumn="id",this._employeeFilterParams.sortOrder="asc"}_reloadGridData(){this.isLoadingGridDataSig.set(!0),this._employeeServices.getEmployees(this._employeeFilterParams).pipe(O(this._mapPaginatedListToGridData.bind(this)),K(()=>{this.isLoadingGridDataSig.set(!1)})).subscribe({next:e=>{this.gridDataSig.set(e.items),this._updateGridConfig(e)},error:e=>{this._alertService.showDanger(`Error al obtener empleados. ${e.statusText}`)}})}_getPositions(){return this._positionServices.getPositions().pipe(Y(()=>(this._alertService.showDanger("Error al cargar la lista de puestos."),U([]))))}_getCountries(){return this._countryServices.getCountries().pipe(Y(()=>(this._alertService.showDanger("Error al cargar la lista de paises."),U([]))))}_loadData(){this.isLoadingGridDataSig.set(!0),this.isLoadingFilterGridDataSig.set(!0),this._setEmployeeFilterParameters(),te({positions:this._getPositions(),countries:this._getCountries(),employees:this._employeeServices.getEmployees(this._employeeFilterParams)}).pipe(K(()=>{this.isLoadingGridDataSig.set(!1),this.isLoadingFilterGridDataSig.set(!1),this._cdr.markForCheck()})).subscribe({next:e=>{this._positions=e.positions,this._countries=e.countries;let t={id:"all",description:"Todos"};this._positions.unshift(t),this._countries.unshift(t),this._initializeGridFilter();let i=this._mapPaginatedListToGridData(e.employees);this.gridDataSig.set(i.items),this._updateGridConfig(i)},error:()=>{this._alertService.showDanger("Error al cargar datos.")}})}_mapPaginatedListToGridData(e){let t=e.items.map(i=>{let r={imgUrl:i.imgUrl,id:i.id,elipsisActions:this._setElipsisActions(i),name:i.name,surname:i.surname,birthDate:i.birthDate,active:i.active,position:this._getPositionDescription(i.positionId),gender:this._getGenderDescription(i.genderId),country:this._getCountryDescription(i.countryId)};if(typeof i.birthDate=="string"){let o=D.fromISO(i.birthDate);r.birthDate=o.isValid?o.toFormat("dd/MM/yyyy"):i.birthDate}else r.birthDate=i.birthDate;return r});return y(b({},e),{items:t,pageIndex:e.page-1})}_getCountryDescription(e){return this._countries.find(t=>t.id===e)?.description||""}_getPositionDescription(e){return this._positions.find(t=>t.id===e)?.description||""}_getGenderDescription(e){return this._genders.find(t=>t.id===e)?.description||""}_setElipsisActions(e){return[{id:"edit",label:"Editar",icon:"edit",action:t=>this._editEmployee(t)},{id:"delete",label:"Eliminar",icon:"delete_forever",action:t=>this._deleteEmployee(t),condition:()=>e.active===!1}]}_editEmployee(e){this._router.navigate([`/employee/edit/${e}`],{queryParams:this._queryParams})}_deleteEmployee(e){this._openConfirmationDialog().subscribe(t=>{t&&this._employeeServices.deleteEmployee(e).subscribe({next:()=>{this._showSnackbar(),this._setEmployeeFilterParameters(),this._createChips(this._defaultChips),this._initializeGridFilter(),this._reloadGridData()},error:()=>{this._alertService.showDanger("Error al eliminar el empleado.")}})})}_updateGridConfigOnSortChange(e){let t=this.gridConfigSig().paginator||this._defaultPaginatorOptions;this.gridConfigSig.update(i=>y(b({},i),{OrderBy:{columnName:e.active,direction:e.direction},paginator:y(b({},t),{pageIndex:0})}))}_updateGridConfig(e){let{totalCount:t,pageIndex:i,pageSize:r}=e,{sortColumn:o="",sortOrder:a=""}=this._employeeFilterParams,s=y(b({},this.gridConfigSig().paginator||this._defaultPaginatorOptions),{totalCount:t,pageSize:r,pageIndex:i}),_={columnName:o,direction:a};this.gridConfigSig.update(S=>y(b({},S),{paginator:s,OrderBy:_}))}_mapToEmployeeFilterParams(e){let t={},i=e;for(let r in i){let o=i[r];if(!(["active","position","gender","country"].includes(r)&&(o==="all"||o==="Todos"||o===""))){if(r==="birthDateRange"&&o){let a=o;if(a.startDate){let s=D.fromJSDate(new Date(a.startDate));s.isValid&&(t.birthDate_gte=s.toFormat("yyyy-MM-dd"))}if(a.endDate){let s=D.fromJSDate(new Date(a.endDate));s.isValid&&(t.birthDate_lte=s.toFormat("yyyy-MM-dd"))}continue}o!=null&&(t[r]=o)}}return t}_setGridConfiguration(){return ye({columns:[{name:"imgUrl",width:"100px",type:"img",isSortable:!1,hasHeader:!1},{name:"id",width:"100px"},{name:"name",width:"200px"},{name:"surname",width:"200px"},{name:"birthDate"},{name:"gender",isSortable:!1},{name:"position",isSortable:!1},{name:"country",isSortable:!1},{name:"active",class:"status-circle",align:"center",width:"75px"},{name:"elipsisActions",width:"100px",align:"center",isSortable:!1,type:"elipsis",hasHeader:!1}],paginator:{pageSize:this._employeeFilterParams.limit||25,pageSizeOptions:[25,50],totalCount:0,pageIndex:0,isServerSide:!0},hasSorting:{isServerSide:!0},OrderBy:{columnName:this._employeeFilterParams.sortColumn||"id",direction:this._employeeFilterParams.sortOrder||"asc"},hasChips:!0,actionButtons:[{class:"primary-button",icon:"assets/person.svg",text:"Agregar",action:()=>this.onCreateEmployee()},{class:"download-button",type:"download",icon:"assets/download.svg",tooltip:"Descargar excel"}]})}_initializeGridFilter(){let e=[{fieldName:"id",fieldType:"text",label:"Id"},{fieldName:"name",fieldType:"text",label:"Nombre"},{fieldName:"surname",fieldType:"text",label:"Apellido"},{fieldName:"gender",fieldType:"select",label:"G\xE9nero",selectItems:this._genders},{fieldName:"birthDateRange",fieldType:"dateRangeComponent",label:"Rango nacimiento"},{fieldName:"position",fieldType:"select",label:"Puesto",selectItems:this._positions},{fieldName:"country",fieldType:"select",label:"Pais",selectItems:this._countries},{fieldName:"active",fieldType:"select",label:"Estado",selectItems:[{description:"Todos",id:"all"},{description:"activo",id:1},{description:"inactivo",id:0}]}];this.gridFilterConfigSig.set(e);let t={};e.forEach(i=>{switch(i.fieldType){case"text":t[i.fieldName]=new k("");break;case"select":t[i.fieldName]=new k("all");break;case"dateRangeComponent":t[i.fieldName]=new B({startDate:new k(null),endDate:new k(null)});break}}),this.gridFilterFormSig.set(new B(t))}_openConfirmationDialog(){return this._feedbackDialogService.openFeedbackDialog({type:"warning",title:"El registro se eliminar\xE1.",message:" \xBFEst\xE1 seguro/a que desea Eliminar?",showButtons:!0,cancelButtonText:"Cancelar",acceptButtonText:"Aceptar"}).afterClosed().pipe(O(t=>!!t))}_showSnackbar(){this._snackbarService.show({message:"\xA1Eliminado con \xE9xito!"})}_setBreadcrumb(){this._breadcrumbService.setBreadcrumbs([{label:"Inicio",path:"/home"},{label:`${this._queryParams.componentName}`,path:"/employees"}])}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-employee-grid-pagination"]],standalone:!0,features:[P],decls:9,vars:9,consts:[[1,"wrapper"],[1,"wrapper__content-area"],[1,"wrapper__grid-area"],[1,"wrapper__breadcrumb-spacing"],[1,"wrapper__alert-spacing"],[1,"wrapper__grid-component",3,"pageChange","sortChange","exportExcel","chipRemoved","createButtonClicked","rowDblClick","gridConfigSig","gridDataSig","isLoadingSig","chipsSig"],[1,"wrapper__filter-container"],[3,"emitFilterApplied","isCollapsedChange","configSig","filterFormSig","isLoadingSig"]],template:function(t,i){t&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),C(3,"app-breadcrumb",3)(4,"app-alert",4),p(5,"app-grid",5),F("pageChange",function(o){return i.onGridPageChange(o)})("sortChange",function(o){return i.onGridSortChange(o)})("exportExcel",function(){return i.onExportToExcel()})("chipRemoved",function(o){return i.onRemoveChip(o)})("createButtonClicked",function(){return i.onCreateEmployee()})("rowDblClick",function(o){return i.onRowDblClick(o)}),d()(),p(6,"div",6),ie(7),p(8,"app-grid-filter",7),F("emitFilterApplied",function(o){return i.applyFilter(o)})("isCollapsedChange",function(o){return i.onFilterCollapseChange(o)}),d(),re(),d()()()),t&2&&(l(),w("wrapper__content-area--filter-collapsed",i.isFilterCollapsedSig()),l(4),m("gridConfigSig",i.gridConfigSig())("gridDataSig",i.gridDataSig())("isLoadingSig",i.isLoadingGridDataSig())("chipsSig",i.chipsSig()),l(3),m("configSig",i.gridFilterConfigSig())("filterFormSig",i.gridFilterFormSig())("isLoadingSig",i.isLoadingFilterGridDataSig()))},dependencies:[M,le,ve,qe,Ne,Be,Se],styles:[".wrapper[_ngcontent-%COMP%]{height:calc(100vh - 100px);background-color:#fafbfc}.wrapper__content-area[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 260px;gap:16px;width:100%;height:100%;overflow:hidden}.wrapper__content-area--filter-collapsed[_ngcontent-%COMP%]{grid-template-columns:1fr 50px}.wrapper__grid-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:0;overflow:hidden}.wrapper__breadcrumb-spacing[_ngcontent-%COMP%]{margin-top:20px}.wrapper__alert-spacing[_ngcontent-%COMP%]{margin-bottom:16px}.wrapper__grid-component[_ngcontent-%COMP%]{flex:1;min-height:0}.wrapper__filter-container[_ngcontent-%COMP%]{width:95%;min-height:0;display:flex;flex-direction:column;height:99.7%;box-shadow:0 6px 12px #00000026}"],changeDetection:0})}}return n})();export{ii as EmployeeGridPaginationComponent};
